import e,{useState as t,useEffect as r,useMemo as a}from"react";const n=()=>{},o=e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),l=l=>function(u){const{precision:c,decimalSeparator:s=".",thousandSeparator:i="",onValueChange:p=n,onChange:g=n,onBlur:m=n,...d}=u;if(i===s)throw new Error(`\n      Thousand separator cannot be same with decimal separator.\n      Thousand separator: '${i}'\n      Decimal separator: '${s}'\n    `);const[f,h]=t("");r((()=>{const{formattedValue:e}=v(u.value,"change");h(e)}),[u.value,i,s,c]);const b=a((()=>new RegExp(`[0-9${o(s)}]`)),[s]),v=(e,t)=>{"number"==typeof e&&(e=e.toString().replace(".",s));const r=((e,t)=>{const r=new RegExp(`[^0-9${o(t)}]|^${o(t)}$`,"g");return(e?.toString().replace(r,"")||"").replace(new RegExp(`${o(t)}`,"g"),(a=0,e=>a++?"":e));var a})(e,s),a=((e,t,r,a,n)=>{const o=e.includes(r);let[l,u]=e.split(r);l=((e,t)=>e.replace(/\B(?=(\d{3})+(?!\d))/g,t))(l,t),u&&void 0!==n&&(u=u.substring(0,n));let c=l;return(void 0===n||n>0)&&("change"===a&&(c+=o?r+u:""),"blur"===a&&(c+=u?r+u:"")),c})(r,i,s,t,c),n=(e=>[null,void 0,""].includes(e))(r)?NaN:((e,t=15)=>+parseFloat(Number(e).toPrecision(t)))(a.replaceAll(i,"").replace(s,"."));return{numberValueStr:r,formattedValue:a,numberValue:n}},V=(e,t)=>{const{value:r,selectionStart:a}=e.target,{formattedValue:n,numberValue:o}=v(r,t),l=((e,t,r,a,n)=>{let o=r-1;for(t[o]===a&&(o-=1);!n.test(t[o])&&o>1;)o--;const l=t[o];let u=0;for(let e=0;e<o;e++)t[e]===l&&u++;let c=0;for(let t=0;t<e.length;t++)if(e[t]===l){if(c===u){r=t+1;break}c++}return r})(n,r,a,i,b);e.target.value=n,e.target.setSelectionRange(l,l),h(n),p({formattedValue:n,numberValue:o})};return e.createElement(l,{...d,value:f,onChange:e=>{V(e,"change"),g(e)},onBlur:e=>{V(e,"blur"),m(e)}})},u=l("input");export{u as SeparatorInput,l as withSeparator};
//# sourceMappingURL=index.esm.js.map
